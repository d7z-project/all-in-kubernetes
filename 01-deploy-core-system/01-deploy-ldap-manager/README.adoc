= 部署 LDAP 管理器
:experimental:
:icons: font
:toc: left
:source-highlighter: rouge

== 简介

此项目使用 `ldapaccountmanager` 作为 LDAP 管理器。

== 创建 Deployment

使用以下配置创建关联的 `Deployment`。

[source%linenums,yaml]
----
include::./conf/01-deploy-lam.yaml[]
----

创建完成后使用 `kubectl get pods -n core-system` 查看创建结果。

=== 创建 Service

使用以下配置创建 Service ，关联之前创建的 Deployment。

[source%linenums,yaml]
----
include::./conf/02-create-service.yaml[]
----

创建完成后使用 `kubectl get svc -n core-system` 查看创建结果。

=== 绑定 Ingress

导入此配置，绑定 Ingress, 将 LAM 映射到外部地址。注意：里面标注的内容请按照实际情况修改。

[source%linenums,yaml]
----
include::./conf/03-create-ingress.yaml[]
----

. 其中
<1> 指定 Ingress 暴露的 Host
<2> 指定 Ingress 使用的 TLS 证书 secret 名称
<3> 指定 Ingress 使用的 Host
<4> 指定 Ingress 绑定的 Service

== 验证

访问地址 `https://example.com` , 使用 LDAP 配置的管理员密码登陆，如果登陆成功则表明安装正确。
