<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>文档任务</title>
<style>
@import url(https://fonts.googleapis.com/css?family=Noto+Sans);
@import url(https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css); /* Default asciidoc style framework - important */

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>文档任务</h1>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#_环境介绍">环境介绍</a></li>
<li><a href="#_组件部署">组件部署</a>
<ul class="sectlevel2">
<li><a href="#_底层组件">底层组件</a></li>
<li><a href="#_核心组件_core_system">核心组件 (core-system)</a></li>
<li><a href="#_核心中间件_core_middleware">核心中间件 (core-middleware)</a></li>
<li><a href="#_核心应用_core_app">核心应用 (core-app)</a></li>
<li><a href="#_扩展应用_share_app">扩展应用 (share-app)</a></li>
<li><a href="#_集群监控_monitor_app">集群监控 (monitor-app)</a></li>
</ul>
</li>
<li><a href="#_自动化部署测试">自动化部署测试</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
所有组件除特殊说明的除外均为单实例部署，系统内所有账户均采用LDAP来管理。
</td>
</tr>
</table>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
避免使用 <code>bitnami</code> 打包的镜像。
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_环境介绍">环境介绍</h2>
<div class="sectionbody">
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> <a href="./zz-document/other/HARDWARE_INFO.html">介绍物理机环境</a></p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> <a href="./zz-document/other/HARDWARE_INFO.html">介绍部署机器环境</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_组件部署">组件部署</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_底层组件">底层组件</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 安装 Kubernetes(google)/验证</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 初始化部署环境</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 安装 <code>containerd</code></p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 安装 <code>kubeadm</code></p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 部署控制节点</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 配置CNI 插件</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 部署工作节点</p>
</li>
</ul>
</div>
</li>
<li>
<p><i class="fa fa-square-o"></i> 安装 Kubernetes(k3s)/验证</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 配置 共享存储(rook-nfs)/验证</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 共享 <code>/share</code></p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 创建 NFS Server</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 测试</p>
</li>
</ul>
</div>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 配置 共享存储(nfs-ganesha)/验证</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 共享 <code>/share</code></p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 创建 NFS Server</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 测试</p>
</li>
</ul>
</div>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 部署 LoadBalancer实现(metallb)/验证</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 部署LoadBalancer</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 分配IP池</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 验证LoadBalancer</p>
</li>
</ul>
</div>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 部署 Ingress(Nginx)/验证</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 部署 Ingress(Nginx)</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 测试 Ingress(Nginx)</p>
</li>
</ul>
</div>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 部署 Cert-Manager/验证</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 导入资源</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 测试 CertManager</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_核心组件_core_system">核心组件 (core-system)</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 部署 OpenLDAP/验证</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 导入配置</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 创建PVC</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 安装 OpenLDAP</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 添加 MemberOf 支持</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 验证</p>
</li>
</ul>
</div>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 部署 ldap-account-manager/验证</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 部署 APP</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 部署 Service</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 部署 Ingress</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 验证</p>
</li>
</ul>
</div>
</li>
<li>
<p><i class="fa fa-square-o"></i> 部署 Velero</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_核心中间件_core_middleware">核心中间件 (core-middleware)</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 部署 MariaDB/验证</p>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-check-square-o"></i> 创建PVC</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 创建服务及绑定</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 测试部署</p>
</li>
</ul>
</div>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 部署 Redis/验证</p>
</li>
<li>
<p><i class="fa fa-check-square-o"></i> 部署 PostgresSQL/验证</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> 部署 ElasticSearch/验证</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_核心应用_core_app">核心应用 (core-app)</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> 部署 Nexus3/验证</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> 部署 Gitlab/验证</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_扩展应用_share_app">扩展应用 (share-app)</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> 部署 Gitlab-Runner/验证</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> 部署 Jellyfin/验证</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> 部署 V2ray/验证</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="_集群监控_monitor_app">集群监控 (monitor-app)</h3>
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> 部署 Prometheus/验证</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> 部署 AlertManager/验证</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> 部署 Grafana/验证</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> 部署 NodeExporter/验证</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_自动化部署测试">自动化部署测试</h2>
<div class="sectionbody">
<div class="ulist checklist">
<ul class="checklist">
<li>
<p><i class="fa fa-square-o"></i> 使用 Gitlab Actions 做自动化测试</p>
</li>
<li>
<p><i class="fa fa-square-o"></i> 使用 Gitlab Runner 做自动化测试</p>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="custom-content">
    <style>
        .custom-footer {
            margin: 0;
            padding: 20px;
            background: #555555;
            color: white;
        }

        .custom-footer a {
            color: white;
        }
    </style>
    <p class="custom-footer">
        最后编辑于 2022年07月19日 09时27分15秒 |
        <a target="_blank"
           href="https://github.com/d7z-project/all-in-kubernetes/tree/50d537b57938d7a7d2d2b077349fe027097af9f3//zz-TODO.adoc">查看源码</a> |
        <a href="https://github.com/d7z-project/all-in-kubernetes/tree/50d537b57938d7a7d2d2b077349fe027097af9f3/"
            target="_blank">#50d537b</a>
</div>
</body>
</html>