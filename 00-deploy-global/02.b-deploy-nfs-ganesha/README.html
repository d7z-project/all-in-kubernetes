<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>配置全局存储 (nfs-ganesha)</title>
<style>
/* Asciidoctor default stylesheet | MIT License | https://asciidoctor.org */

@import url(//fonts.googleapis.com/css?family=Noto+Sans);
@import url(https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css); /* Default asciidoc style framework - important */

/* CUSTOMISATIONS */
/* Change the values in root for quick customisation. If you want even more fine grain... venture further. */
:root {
    --maincolor: #282c34;
    --primarycolor: #f39c12;
    --secondarycolor: #03a9f4;
    --tertiarycolor: #4db6ac;
    --sidebarbackground: #21252b;
    --linkcolor: #f44336;
    --linkcoloralternate: #ff9800;
    --white: #FFFFFF;
}

/* Text styles */

body {
    font-family: "Noto Sans", sans-serif;
    background-color: var(--maincolor);
    color: var(--white);
}

h1 {
    color: var(--primarycolor) !important;
    font-family: "Noto Sans", sans-serif;
}

h2, h3, h4, h5, h6 {
    color: var(--secondarycolor) !important;
    font-family: "Noto Sans", sans-serif;
}

.title {
    color: var(--white) !important;
    font-family: "Noto Sans", sans-serif;
    font-style: normal;
    font-weight: normal;
}

p {
    font-family: "Noto Sans", sans-serif ! important
}

#toc.toc2 a:link {
    color: var(--linkcolor);
}

blockquote {
    color: var(--tertiarycolor) !important
}

.quoteblock {
    color: var(--white)
}

code {
    color: var(--linkcoloralternate);
    background-color: var(--sidebarbackground) !important
}


/* Table styles */
th {
    background-color: var(--maincolor);
    color: var(--white) !important;
}

td {
    background-color: var(--maincolor);
    color: var(--linkcoloralternate) !important
}


#toc.toc2 {
    background-color: var(--sidebarbackground);
}

#toctitle {
    color: var(--white);
}

/* Responsiveness fixes */
video {
    max-width: 100%;
}

.exampleblock > .content {
    background-color: var(--maincolor);
}

a {
    color: var(--secondarycolor);
}

.admonitionblock td.icon .icon-tip::before {
    text-shadow: none;
    color: var(--white);
}

.admonitionblock td.icon .icon-note::before {
    color: var(--tertiarycolor);
}

.admonitionblock td.icon .icon-important::before {
    color: var(--linkcolor);
}

/*.admonitionblock td.icon .icon-caution::before {
  color: var(--linkcoloralternate);
}*/
.admonitionblock td.icon .icon-warning::before {
    color: var(--primarycolor);
}

#preamble > .sectionbody > .paragraph:first-of-type p {
    color: var(--white);
}

.quoteblock blockquote::before {
    color: var(--primarycolor);
}

.quoteblock .attribution cite, .verseblock .attribution cite {
    color: var(--white);
}

.verseblock pre {
    color: var(--white);
}

.quoteblock blockquote, .quoteblock blockquote p {
    color: var(--white);
}

.sidebarblock {
    background: var(--sidebarbackground);
}

.literalblock pre, .listingblock pre:not(.highlight), .listingblock pre[class="highlight"], .listingblock pre[class^="highlight "], .listingblock pre.CodeRay, .listingblock pre.prettyprint {
    background: var(--sidebarbackground);
    color: var(--white);
}

#header .details {
    color: var(--white);
}

#header .details span.email a {
    color: var(--linkcoloralternate);
}

.rouge.highlight {
    background-color: var(--sidebarbackground);
}

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>配置全局存储 (nfs-ganesha)</h1>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#_导入_rbac_规则和初始化">导入 RBAC 规则和初始化</a></li>
<li><a href="#_映射节点目录">映射节点目录</a></li>
<li><a href="#_安装_nfs_server">安装 NFS Server</a></li>
<li><a href="#_验证部署情况">验证部署情况</a>
<ul class="sectlevel2">
<li><a href="#_导入测试配置">导入测试配置</a></li>
<li><a href="#_验证测试">验证测试</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>项目地址：<a target="_blank" href="https://github.com/kubernetes-sigs/nfs-ganesha-server-and-external-provisioner">nfs-ganesha-server-and-external-provisioner</a></p>
</div>
<div class="paragraph">
<p>kubernetes 安装后可选择一个节点的某个目录作为集群数据存储目录。</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_导入_rbac_规则和初始化">导入 RBAC 规则和初始化</h2>
<div class="sectionbody">
<div class="paragraph">
<p>在开始前需要导入RBAC规则和初始化配置，此过程需要拉取镜像 <code>k8s.gcr.io/sig-storage/nfs-provisioner:v3.0.0</code>,同时需要集群上每个节点安装有 <code>nfs-common</code> 软件包。</p>
</div>
<details>
<summary class="title">点击展开部署命令</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
</pre></td><td class="code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Namespace</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">storage-nfs</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
    <span class="na">release</span><span class="pi">:</span> <span class="s">nfs-server</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">storage-nfs</span>

<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
    <span class="na">release</span><span class="pi">:</span> <span class="s">nfs-server</span>
<span class="na">rules</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">"</span> <span class="pi">]</span>
    <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">persistentvolumes"</span> <span class="pi">]</span>
    <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">get"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">list"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">watch"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">create"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">delete"</span> <span class="pi">]</span>
  <span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">"</span> <span class="pi">]</span>
    <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">persistentvolumeclaims"</span> <span class="pi">]</span>
    <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">get"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">list"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">watch"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">update"</span> <span class="pi">]</span>
  <span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">storage.k8s.io"</span> <span class="pi">]</span>
    <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">storageclasses"</span> <span class="pi">]</span>
    <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">get"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">list"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">watch"</span> <span class="pi">]</span>
  <span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">"</span> <span class="pi">]</span>
    <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">events"</span> <span class="pi">]</span>
    <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">list"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">watch"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">create"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">update"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">patch"</span> <span class="pi">]</span>
  <span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">"</span> <span class="pi">]</span>
    <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">services"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">endpoints"</span> <span class="pi">]</span>
    <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">get"</span> <span class="pi">]</span>
  <span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">extensions"</span> <span class="pi">]</span>
    <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">podsecuritypolicies"</span> <span class="pi">]</span>
    <span class="na">resourceNames</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">nfs-provisioner"</span> <span class="pi">]</span>
    <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">use"</span> <span class="pi">]</span>
  <span class="pi">-</span> <span class="na">apiGroups</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">"</span> <span class="pi">]</span>
    <span class="na">resources</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">endpoints"</span> <span class="pi">]</span>
    <span class="na">verbs</span><span class="pi">:</span> <span class="pi">[</span> <span class="s2">"</span><span class="s">get"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">list"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">watch"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">create"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">delete"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">update"</span><span class="pi">,</span> <span class="s2">"</span><span class="s">patch"</span> <span class="pi">]</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRoleBinding</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
    <span class="na">release</span><span class="pi">:</span> <span class="s">nfs-server</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
<span class="na">roleRef</span><span class="pi">:</span>
  <span class="na">apiGroup</span><span class="pi">:</span> <span class="s">rbac.authorization.k8s.io</span>
  <span class="na">kind</span><span class="pi">:</span> <span class="s">ClusterRole</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
<span class="na">subjects</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="na">kind</span><span class="pi">:</span> <span class="s">ServiceAccount</span>
    <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
    <span class="na">namespace</span><span class="pi">:</span> <span class="s">storage-nfs</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
<div class="sect1">
<h2 id="_映射节点目录">映射节点目录</h2>
<div class="sectionbody">
<div class="paragraph">
<p>具体步骤可参考 <a href="../02.a-deploy-rook-nfs/README.html">RookNFS</a> , 此处仅放置最终配置。</p>
</div>
<details>
<summary class="title">点击展开配置</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
</pre></td><td class="code"><pre><span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">PersistentVolume</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-local-pv-share</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">accessModes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">ReadWriteOnce</span>
  <span class="na">capacity</span><span class="pi">:</span>
    <span class="na">storage</span><span class="pi">:</span> <span class="s">1000Gi</span>
  <span class="na">local</span><span class="pi">:</span>
    <span class="c1"># 指定挂载的目录</span>
    <span class="na">path</span><span class="pi">:</span> <span class="s">/share</span>
    <span class="c1"># 配置节点亲和性</span>
  <span class="na">nodeAffinity</span><span class="pi">:</span>
    <span class="na">required</span><span class="pi">:</span>
      <span class="na">nodeSelectorTerms</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">matchExpressions</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">key</span><span class="pi">:</span> <span class="s">kubernetes.io/hostname</span>
              <span class="na">operator</span><span class="pi">:</span> <span class="s">In</span>
              <span class="na">values</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">node-worker-01</span> <span class="c1"># 指定部署在 node-worker-01 节点上，可根据实际需求更改</span>
  <span class="na">persistentVolumeReclaimPolicy</span><span class="pi">:</span> <span class="s">Retain</span>
  <span class="na">storageClassName</span><span class="pi">:</span> <span class="s">nfs-local-sc-share</span>
  <span class="na">volumeMode</span><span class="pi">:</span> <span class="s">Filesystem</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">storage.k8s.io/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">StorageClass</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-local-sc-share</span>
<span class="na">provisioner</span><span class="pi">:</span> <span class="s">kubernetes.io/no-provisioner</span>
<span class="na">reclaimPolicy</span><span class="pi">:</span> <span class="s">Delete</span>
<span class="na">volumeBindingMode</span><span class="pi">:</span> <span class="s">WaitForFirstConsumer</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">PersistentVolumeClaim</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-local-pvc-share</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">storage-nfs</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">accessModes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">ReadWriteOnce</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">storage</span><span class="pi">:</span> <span class="s">100Gi</span>
  <span class="na">storageClassName</span><span class="pi">:</span> <span class="s">nfs-local-sc-share</span>
  <span class="na">volumeMode</span><span class="pi">:</span> <span class="s">Filesystem</span>
  <span class="na">volumeName</span><span class="pi">:</span> <span class="s">nfs-local-pv-share</span> <span class="c1"># 指定关联的PV 名称</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
<div class="sect1">
<h2 id="_安装_nfs_server">安装 NFS Server</h2>
<div class="sectionbody">
<div class="paragraph">
<p>将上一操作创建的 PVC 绑定至 StatefulSet,然后通过 Service 暴露对应的端口，最后将目标绑定在 SC 即可 ,在此配置中，Provisioner 为 <code>nfs.3rd.storage.k8s.io/nfs-server-provisioner</code> 。</p>
</div>
<details>
<summary class="title">点击展开配置</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">  1
  2
  3
  4
  5
  6
  7
  8
  9
 10
 11
 12
 13
 14
 15
 16
 17
 18
 19
 20
 21
 22
 23
 24
 25
 26
 27
 28
 29
 30
 31
 32
 33
 34
 35
 36
 37
 38
 39
 40
 41
 42
 43
 44
 45
 46
 47
 48
 49
 50
 51
 52
 53
 54
 55
 56
 57
 58
 59
 60
 61
 62
 63
 64
 65
 66
 67
 68
 69
 70
 71
 72
 73
 74
 75
 76
 77
 78
 79
 80
 81
 82
 83
 84
 85
 86
 87
 88
 89
 90
 91
 92
 93
 94
 95
 96
 97
 98
 99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159
160
161
162
163
164
165
166
</pre></td><td class="code"><pre><span class="nn">---</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">StorageClass</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">storage.k8s.io/v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">cluster-share</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
    <span class="na">release</span><span class="pi">:</span> <span class="s">nfs-server</span>
<span class="na">provisioner</span><span class="pi">:</span> <span class="s">nfs.3rd.storage.k8s.io/nfs-server-provisioner</span>
<span class="na">reclaimPolicy</span><span class="pi">:</span> <span class="s">Retain</span>
<span class="na">allowVolumeExpansion</span><span class="pi">:</span> <span class="no">true</span>
<span class="na">mountOptions</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">vers=3</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
    <span class="na">release</span><span class="pi">:</span> <span class="s">nfs-server</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">storage-nfs</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">type</span><span class="pi">:</span> <span class="s">ClusterIP</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">2049</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">nfs</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">nfs</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">2049</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">nfs-udp</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-udp</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">32803</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">nlockmgr</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">nlockmgr</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">32803</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">nlockmgr-udp</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">nlockmgr-udp</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">20048</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">mountd</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">mountd</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">20048</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">mountd-udp</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">mountd-udp</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">875</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">rquotad</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">rquotad</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">875</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">rquotad-udp</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">rquotad-udp</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">111</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">rpcbind</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">rpcbind</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">111</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">rpcbind-udp</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">rpcbind-udp</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">662</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">statd</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">statd</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">662</span>
      <span class="na">targetPort</span><span class="pi">:</span> <span class="s">statd-udp</span>
      <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
      <span class="na">name</span><span class="pi">:</span> <span class="s">statd-udp</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
    <span class="na">release</span><span class="pi">:</span> <span class="s">nfs-server</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">StatefulSet</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
    <span class="na">release</span><span class="pi">:</span> <span class="s">nfs-server</span>
  <span class="na">namespace</span><span class="pi">:</span> <span class="s">storage-nfs</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">1</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
      <span class="na">release</span><span class="pi">:</span> <span class="s">nfs-server</span>
  <span class="na">serviceName</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
        <span class="na">release</span><span class="pi">:</span> <span class="s">nfs-server</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">terminationGracePeriodSeconds</span><span class="pi">:</span> <span class="m">100</span>
      <span class="na">serviceAccountName</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s2">"</span><span class="s">k8s.gcr.io/sig-storage/nfs-provisioner:v3.0.0"</span>
          <span class="na">imagePullPolicy</span><span class="pi">:</span> <span class="s">IfNotPresent</span>
          <span class="na">ports</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nfs</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">2049</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-udp</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">2049</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nlockmgr</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">32803</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">nlockmgr-udp</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">32803</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">mountd</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">20048</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">mountd-udp</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">20048</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">rquotad</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">875</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">rquotad-udp</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">875</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">rpcbind</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">111</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">rpcbind-udp</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">111</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">statd</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">662</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">TCP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">statd-udp</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">662</span>
              <span class="na">protocol</span><span class="pi">:</span> <span class="s">UDP</span>
          <span class="na">securityContext</span><span class="pi">:</span>
            <span class="na">capabilities</span><span class="pi">:</span>
              <span class="na">add</span><span class="pi">:</span>
                <span class="pi">-</span> <span class="s">DAC_READ_SEARCH</span>
                <span class="pi">-</span> <span class="s">SYS_RESOURCE</span>
          <span class="na">args</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s2">"</span><span class="s">-provisioner=nfs.3rd.storage.k8s.io/nfs-server-provisioner"</span>
          <span class="na">env</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">POD_IP</span>
              <span class="na">valueFrom</span><span class="pi">:</span>
                <span class="na">fieldRef</span><span class="pi">:</span>
                  <span class="na">fieldPath</span><span class="pi">:</span> <span class="s">status.podIP</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">SERVICE_NAME</span>
              <span class="na">value</span><span class="pi">:</span> <span class="s">nfs-server-provisioner</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">POD_NAMESPACE</span>
              <span class="na">valueFrom</span><span class="pi">:</span>
                <span class="na">fieldRef</span><span class="pi">:</span>
                  <span class="na">fieldPath</span><span class="pi">:</span> <span class="s">metadata.namespace</span>
          <span class="na">volumeMounts</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">export-volume</span>
              <span class="na">mountPath</span><span class="pi">:</span> <span class="s">/export</span>
      <span class="na">volumes</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">export-volume</span>
          <span class="na">persistentVolumeClaim</span><span class="pi">:</span>
            <span class="na">claimName</span><span class="pi">:</span> <span class="s2">"</span><span class="s">nfs-local-pvc-share"</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</details>
</div>
</div>
<div class="sect1">
<h2 id="_验证部署情况">验证部署情况</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_导入测试配置">导入测试配置</h3>
<div class="paragraph">
<p>导入以下配置以创建测试 Pod。</p>
</div>
<details>
<summary class="title">点击展开配置</summary>
<div class="content">
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="yaml"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno"> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
</pre></td><td class="code"><pre><span class="c1">## 测试</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">PersistentVolumeClaim</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">cluster-test-pvc</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">storageClassName</span><span class="pi">:</span> <span class="s">cluster-share</span>
  <span class="na">accessModes</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="s">ReadWriteMany</span>
  <span class="na">resources</span><span class="pi">:</span>
    <span class="na">requests</span><span class="pi">:</span>
      <span class="na">storage</span><span class="pi">:</span> <span class="s">10Gi</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-demo</span>
    <span class="na">role</span><span class="pi">:</span> <span class="s">web-frontend</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-web</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">2</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-demo</span>
      <span class="na">role</span><span class="pi">:</span> <span class="s">web-frontend</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-demo</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">web-frontend</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">web</span>
          <span class="na">image</span><span class="pi">:</span> <span class="s">nginx</span>
          <span class="na">ports</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">web</span>
              <span class="na">containerPort</span><span class="pi">:</span> <span class="m">80</span>
          <span class="na">volumeMounts</span><span class="pi">:</span>
            <span class="c1"># name must match the volume name below</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">rook-nfs-vol</span>
              <span class="na">mountPath</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/usr/share/nginx/html"</span>
      <span class="na">volumes</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">rook-nfs-vol</span>
          <span class="na">persistentVolumeClaim</span><span class="pi">:</span>
            <span class="na">claimName</span><span class="pi">:</span> <span class="s">cluster-test-pvc</span>
<span class="nn">---</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">apps/v1</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Deployment</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">labels</span><span class="pi">:</span>
    <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-demo</span>
    <span class="na">role</span><span class="pi">:</span> <span class="s">busybox</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-busybox</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">replicas</span><span class="pi">:</span> <span class="m">2</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">matchLabels</span><span class="pi">:</span>
      <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-demo</span>
      <span class="na">role</span><span class="pi">:</span> <span class="s">busybox</span>
  <span class="na">template</span><span class="pi">:</span>
    <span class="na">metadata</span><span class="pi">:</span>
      <span class="na">labels</span><span class="pi">:</span>
        <span class="na">app</span><span class="pi">:</span> <span class="s">nfs-demo</span>
        <span class="na">role</span><span class="pi">:</span> <span class="s">busybox</span>
    <span class="na">spec</span><span class="pi">:</span>
      <span class="na">containers</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">image</span><span class="pi">:</span> <span class="s">busybox</span>
          <span class="na">command</span><span class="pi">:</span>
            <span class="pi">-</span> <span class="s">sh</span>
            <span class="pi">-</span> <span class="s">-c</span>
            <span class="pi">-</span> <span class="s2">"</span><span class="s">while</span><span class="nv"> </span><span class="s">true;</span><span class="nv"> </span><span class="s">do</span><span class="nv"> </span><span class="s">date</span><span class="nv"> </span><span class="s">&gt;</span><span class="nv"> </span><span class="s">/mnt/index.html;</span><span class="nv"> </span><span class="s">hostname</span><span class="nv"> </span><span class="s">&gt;&gt;</span><span class="nv"> </span><span class="s">/mnt/index.html;</span><span class="nv"> </span><span class="s">sleep</span><span class="nv"> </span><span class="s">$(($RANDOM</span><span class="nv"> </span><span class="s">%</span><span class="nv"> </span><span class="s">5</span><span class="nv"> </span><span class="s">+</span><span class="nv"> </span><span class="s">5));</span><span class="nv"> </span><span class="s">done"</span>
          <span class="na">imagePullPolicy</span><span class="pi">:</span> <span class="s">IfNotPresent</span>
          <span class="na">name</span><span class="pi">:</span> <span class="s">busybox</span>
          <span class="na">volumeMounts</span><span class="pi">:</span>
            <span class="c1"># name must match the volume name below</span>
            <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">rook-nfs-vol</span>
              <span class="na">mountPath</span><span class="pi">:</span> <span class="s2">"</span><span class="s">/mnt"</span>
      <span class="na">volumes</span><span class="pi">:</span>
        <span class="pi">-</span> <span class="na">name</span><span class="pi">:</span> <span class="s">rook-nfs-vol</span>
          <span class="na">persistentVolumeClaim</span><span class="pi">:</span>
            <span class="na">claimName</span><span class="pi">:</span> <span class="s">cluster-test-pvc</span>
<span class="nn">---</span>
<span class="na">kind</span><span class="pi">:</span> <span class="s">Service</span>
<span class="na">apiVersion</span><span class="pi">:</span> <span class="s">v1</span>
<span class="na">metadata</span><span class="pi">:</span>
  <span class="na">name</span><span class="pi">:</span> <span class="s">nfs-web</span>
<span class="na">spec</span><span class="pi">:</span>
  <span class="na">ports</span><span class="pi">:</span>
    <span class="pi">-</span> <span class="na">port</span><span class="pi">:</span> <span class="m">80</span>
  <span class="na">selector</span><span class="pi">:</span>
    <span class="na">role</span><span class="pi">:</span> <span class="s">web-frontend</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
</div>
</details>
</div>
<div class="sect2">
<h3 id="_验证测试">验证测试</h3>
<div class="paragraph">
<p>导入完成后使用 <code>kubectl get pods</code> 查看创建情况。创建完成后，执行以下命令，有数据返回则表示成功：</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="rouge highlight"><code data-lang="bash"><table class="linenotable"><tbody><tr><td class="linenos gl"><pre class="lineno">1
2
3
</pre></td><td class="code"><pre>kubectl get pods,pvc
<span class="nb">echo</span><span class="p">;</span> kubectl <span class="nb">exec</span> <span class="si">$(</span>kubectl get pod <span class="nt">-l</span> <span class="nv">app</span><span class="o">=</span>nfs-demo,role<span class="o">=</span>busybox <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.items[0].metadata.name}'</span><span class="si">)</span> <span class="se">\</span>
 <span class="nt">--</span> wget <span class="nt">-qO-</span> http://<span class="si">$(</span>kubectl get services nfs-web <span class="nt">-o</span> <span class="nv">jsonpath</span><span class="o">=</span><span class="s1">'{.spec.clusterIP}'</span><span class="si">)</span><span class="p">;</span> <span class="nb">echo</span>
</pre></td></tr></tbody></table></code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
如果返回403错误，可能是因为文件系统权限问题，可通过 <code>kubectl exec</code> 手动查看。
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<style>
pre.rouge table td { padding: 5px; }
pre.rouge table pre { margin: 0; }
pre.rouge .cm {
  color: #999988;
  font-style: italic;
}
pre.rouge .cp {
  color: #999999;
  font-weight: bold;
}
pre.rouge .c1 {
  color: #999988;
  font-style: italic;
}
pre.rouge .cs {
  color: #999999;
  font-weight: bold;
  font-style: italic;
}
pre.rouge .c, pre.rouge .ch, pre.rouge .cd, pre.rouge .cpf {
  color: #999988;
  font-style: italic;
}
pre.rouge .err {
  color: #a61717;
  background-color: #e3d2d2;
}
pre.rouge .gd {
  color: #000000;
  background-color: #ffdddd;
}
pre.rouge .ge {
  color: #000000;
  font-style: italic;
}
pre.rouge .gr {
  color: #aa0000;
}
pre.rouge .gh {
  color: #999999;
}
pre.rouge .gi {
  color: #000000;
  background-color: #ddffdd;
}
pre.rouge .go {
  color: #888888;
}
pre.rouge .gp {
  color: #555555;
}
pre.rouge .gs {
  font-weight: bold;
}
pre.rouge .gu {
  color: #aaaaaa;
}
pre.rouge .gt {
  color: #aa0000;
}
pre.rouge .kc {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kd {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kn {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kp {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kr {
  color: #000000;
  font-weight: bold;
}
pre.rouge .kt {
  color: #445588;
  font-weight: bold;
}
pre.rouge .k, pre.rouge .kv {
  color: #000000;
  font-weight: bold;
}
pre.rouge .mf {
  color: #009999;
}
pre.rouge .mh {
  color: #009999;
}
pre.rouge .il {
  color: #009999;
}
pre.rouge .mi {
  color: #009999;
}
pre.rouge .mo {
  color: #009999;
}
pre.rouge .m, pre.rouge .mb, pre.rouge .mx {
  color: #009999;
}
pre.rouge .sa {
  color: #000000;
  font-weight: bold;
}
pre.rouge .sb {
  color: #d14;
}
pre.rouge .sc {
  color: #d14;
}
pre.rouge .sd {
  color: #d14;
}
pre.rouge .s2 {
  color: #d14;
}
pre.rouge .se {
  color: #d14;
}
pre.rouge .sh {
  color: #d14;
}
pre.rouge .si {
  color: #d14;
}
pre.rouge .sx {
  color: #d14;
}
pre.rouge .sr {
  color: #009926;
}
pre.rouge .s1 {
  color: #d14;
}
pre.rouge .ss {
  color: #990073;
}
pre.rouge .s, pre.rouge .dl {
  color: #d14;
}
pre.rouge .na {
  color: #008080;
}
pre.rouge .bp {
  color: #999999;
}
pre.rouge .nb {
  color: #0086B3;
}
pre.rouge .nc {
  color: #445588;
  font-weight: bold;
}
pre.rouge .no {
  color: #008080;
}
pre.rouge .nd {
  color: #3c5d5d;
  font-weight: bold;
}
pre.rouge .ni {
  color: #800080;
}
pre.rouge .ne {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nf, pre.rouge .fm {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nl {
  color: #990000;
  font-weight: bold;
}
pre.rouge .nn {
  color: #555555;
}
pre.rouge .nt {
  color: #000080;
}
pre.rouge .vc {
  color: #008080;
}
pre.rouge .vg {
  color: #008080;
}
pre.rouge .vi {
  color: #008080;
}
pre.rouge .nv, pre.rouge .vm {
  color: #008080;
}
pre.rouge .ow {
  color: #000000;
  font-weight: bold;
}
pre.rouge .o {
  color: #000000;
  font-weight: bold;
}
pre.rouge .w {
  color: #bbbbbb;
}
pre.rouge {
  background-color: #f8f8f8;
}
</style>
<div class="custom-content">
    <style>
        .custom-footer {
            margin: 0;
            padding: 20px;
            background: #555555;
            color: white;
        }

        .custom-footer a {
            color: white;
        }
    </style>
    <p class="custom-footer">
        最后编辑于 2022年07月15日 00时44分35秒 |
        <a target="_blank"
           href="https://github.com/d7z-project/all-in-kubernetes/tree/a7dc572667fed4a421bdcb82e54e5369cd40ef57//00-deploy-global/02.b-deploy-nfs-ganesha/README.adoc">查看源码</a> |
        <a href="https://github.com/d7z-project/all-in-kubernetes/tree/a7dc572667fed4a421bdcb82e54e5369cd40ef57/"
            target="_blank">#84f7d5d</a>
</div>
</body>
</html>