<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<title>部署环境概览</title>
<style>
@import url(https://fonts.googleapis.com/css?family=Noto+Sans);
@import url(https://cdn.jsdelivr.net/gh/asciidoctor/asciidoctor@2.0/data/stylesheets/asciidoctor-default.css); /* Default asciidoc style framework - important */

</style>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body class="article toc2 toc-right">
<div id="header">
<h1>部署环境概览</h1>
<div id="toc" class="toc2">
<div id="toctitle">目录</div>
<ul class="sectlevel1">
<li><a href="#_物理机机器">物理机机器</a>
<ul class="sectlevel2">
<li><a href="#_物理机器一">物理机器一</a></li>
<li><a href="#_物理机器二">物理机器二</a></li>
</ul>
</li>
<li><a href="#_kubernetes_部署机器">Kubernetes 部署机器</a>
<ul class="sectlevel2">
<li><a href="#_kubernetes_部署机器一">Kubernetes 部署机器一</a></li>
<li><a href="#_kubernetes_部署机器二">Kubernetes 部署机器二</a></li>
<li><a href="#_kubernetes_部署机器三">Kubernetes 部署机器三</a></li>
</ul>
</li>
</ul>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_物理机机器">物理机机器</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>注意</strong>：非特殊情况，请不要直接使用物理机器部署，否则一旦因为某些问题导致系统崩溃，在没有IPMI、iLO等其他类似硬件的环境下很难远程恢复。</p>
</div>
<div class="sect2">
<h3 id="_物理机器一">物理机器一</h3>
<div class="paragraph">
<p>此机器带有ECC内存纠错、磁盘冗余设计和UPS断电保护，所有数据敏感业务均运行会在此机器上。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">配置指标</th>
<th class="tableblock halign-left valign-top">配置值</th>
<th class="tableblock halign-left valign-top">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>E3-1230v3</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4核心8线程</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">内存</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DDR3</strong> <strong>ECC</strong> 内存 （8Gx4）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">磁盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2T</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3.5寸 <strong>SAS</strong> <strong>RAID-1</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">网络</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Gx6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Intel</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">系统</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxmox</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxmox</strong> 7.x</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_物理机器二">物理机器二</h3>
<div class="paragraph">
<p>此机器带有较新的 <strong>GPU</strong>，适合做音视频硬解；同时硬盘 <strong>IOPS</strong> 较高，适合跑一些IO密集型任务。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">配置指标</th>
<th class="tableblock halign-left valign-top">配置值</th>
<th class="tableblock halign-left valign-top">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>Pentium-4415U</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4核心4线程</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">内存</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">32G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>DDR4</strong> 2133 内存 （16Gx2）</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">磁盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">128G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>mSATA</strong> SSD</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">网络</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1Gx6</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Intel</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">系统</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxmox</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Proxmox</strong> 7.x</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_kubernetes_部署机器">Kubernetes 部署机器</h2>
<div class="sectionbody">
<div class="paragraph">
<p>所有机器均采用 <a target="_blank" href="https://www.debian.org/releases/bullseye/">Debian "bullseye"</a> 作为底层操作系统，并在物理机配置了定时备份任务，具体配置请查看 <a href="../../00-deploy-global/00-init-node/SYSTEM.html">Debian 系统配置</a>。</p>
</div>
<div class="sect2">
<h3 id="_kubernetes_部署机器一">Kubernetes 部署机器一</h3>
<div class="paragraph">
<p>此机器作为 kubernetes 控制节点</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">配置指标</th>
<th class="tableblock halign-left valign-top">配置值</th>
<th class="tableblock halign-left valign-top">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">宿主机</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">物理机器一</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此机器作为控制节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">主机名</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dragon-k8s-master</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此机器作为控制节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host+AES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">八核心</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">虚拟化</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KVM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">内存</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">磁盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">20G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此机器作为控制节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">网络</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.0.0.20</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">关闭了DHCP</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_kubernetes_部署机器二">Kubernetes 部署机器二</h3>
<div class="paragraph">
<p>此机器作为 kubernetes 数据节点。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">配置指标</th>
<th class="tableblock halign-left valign-top">配置值</th>
<th class="tableblock halign-left valign-top">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">宿主机</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">物理机器一</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此机器作为数据节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">主机名</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dragon-k8s-node-1</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此机器作为数据节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host+AES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">八核心</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">虚拟化</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KVM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">内存</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">系统磁盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此机器作为数据节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">扩展磁盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">100G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此磁盘挂载至 <code>/share</code> 目录</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">网络</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.0.0.21</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">关闭了DHCP</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_kubernetes_部署机器三">Kubernetes 部署机器三</h3>
<div class="paragraph">
<p>此机器作为 kubernetes 数据节点，如果机器不够则无需此节点。</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 16.6666%;">
<col style="width: 33.3333%;">
<col style="width: 50.0001%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">配置指标</th>
<th class="tableblock halign-left valign-top">配置值</th>
<th class="tableblock halign-left valign-top">备注</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">宿主机</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">物理机器二</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此机器作为数据节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">主机名</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>dragon-k8s-node-2</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此机器作为数据节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Host+AES</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">四核心</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">虚拟化</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">KVM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Proxmox</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">内存</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">16G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">系统磁盘</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">50G</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">此机器作为数据节点</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">网络</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">10.0.0.22</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">关闭了DHCP</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div class="custom-content">
    <style>
        .custom-footer {
            margin: 0;
            padding: 20px;
            background: #555555;
            color: white;
        }

        .custom-footer a {
            color: white;
        }
    </style>
    <p class="custom-footer">
        最后编辑于 2022年07月15日 00时44分35秒 |
        <a target="_blank"
           href="https://github.com/d7z-project/all-in-kubernetes/tree/50d537b57938d7a7d2d2b077349fe027097af9f3//zz-document/other/HARDWARE_INFO.adoc">查看源码</a> |
        <a href="https://github.com/d7z-project/all-in-kubernetes/tree/50d537b57938d7a7d2d2b077349fe027097af9f3/"
            target="_blank">#84f7d5d</a>
</div>
</body>
</html>